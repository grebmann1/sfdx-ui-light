<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Create Shareable Link</title>
        <link href="/styles/slds-sf-toolkit.css" rel="stylesheet" />
        <style>
            body {
                background: #f3f6fb;
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 1rem;
            }
            .slds-card {
                min-width: 520px;
                max-width: 860px;
                box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
            }
            .kv-row + .kv-row {
                margin-top: 0.5rem;
            }
            .url-output {
                word-break: break-all;
            }
            .section-help {
                color: #576574;
            }
        </style>
        <script defer src="/scripts/link-share.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta
            http-equiv="Content-Security-Policy"
            content="default-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; script-src 'self';" />
    </head>
    <body class="sf-toolkit" style="margin: 0px">
        <div class="slds-card">
            <div class="slds-card__header slds-grid slds-grid_align-spread slds-p-around_medium">
                <div>
                    <div class="slds-text-heading_medium">Create Shareable Link</div>
                    <div class="slds-text-body_small section-help">
                        Generate a URL that applies settings, then redirects to the extension.
                    </div>
                </div>
            </div>
            <div class="slds-card__body slds-card__body_inner slds-p-around_medium">
                <div class="slds-form">
                    <div class="slds-form-element slds-m-bottom_medium">
                        <label class="slds-form-element__label" for="message">
                            Optional message (shown on page)
                        </label>
                        <div class="slds-form-element__control">
                            <input
                                id="message"
                                class="slds-input"
                                type="text"
                                placeholder="e.g., Apply cache settings" />
                        </div>
                    </div>
                    <div class="slds-form-element slds-m-bottom_medium">
                        <label class="slds-form-element__label" for="redirect">
                            Optional redirect (default app.html)
                        </label>
                        <div class="slds-form-element__control">
                            <input
                                id="redirect"
                                class="slds-input"
                                type="text"
                                placeholder="app.html?panel=default" />
                        </div>
                    </div>

                    <fieldset class="slds-form-element slds-m-bottom_medium">
                        <legend class="slds-form-element__legend slds-form-element__label">
                            Settings (key/value)
                        </legend>
                        <div class="slds-text-body_small section-help slds-m-bottom_x-small">
                            Add any number of settings your colleague should apply.
                        </div>
                        <div id="kvContainer">
                            <div class="slds-grid slds-gutters kv-row">
                                <div class="slds-col slds-size_5-of-12">
                                    <input
                                        class="slds-input kv-key"
                                        type="text"
                                        placeholder="overlayEnabled" />
                                </div>
                                <div class="slds-col slds-size_5-of-12">
                                    <input
                                        class="slds-input kv-value"
                                        type="text"
                                        placeholder="true" />
                                </div>
                                <div class="slds-col slds-size_2-of-12 slds-align_absolute-center">
                                    <button
                                        class="slds-button slds-button_icon slds-button_icon-border-filled kv-remove"
                                        type="button"
                                        title="Remove"
                                        aria-label="Remove"
                                        data-action="remove-row">
                                        Ã—
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="slds-m-top_small">
                            <button
                                id="addRow"
                                class="slds-button slds-button_neutral"
                                type="button">
                                Add row
                            </button>
                        </div>
                    </fieldset>

                    <div class="slds-m-top_medium">
                        <button
                            id="generateBtn"
                            class="slds-button slds-button_brand"
                            type="button">
                            Generate Link
                        </button>
                    </div>

                    <div id="result" class="slds-m-top_large slds-hide">
                        <div class="slds-text-title_caps slds-m-bottom_x-small">Share this URL</div>
                        <div class="slds-grid slds-gutters">
                            <div class="slds-col slds-size_3-of-4">
                                <textarea
                                    id="shareUrl"
                                    class="slds-textarea url-output"
                                    rows="3"
                                    readonly></textarea>
                            </div>
                            <div class="slds-col slds-size_1-of-4 slds-align_absolute-center">
                                <button
                                    id="copyBtn"
                                    class="slds-button slds-button_neutral"
                                    type="button">
                                    Copy
                                </button>
                            </div>
                        </div>
                        <div class="slds-m-top_small">
                            <a
                                id="openLink"
                                class="slds-button slds-button_outline-brand"
                                target="_blank"
                                rel="noopener">
                                Open link
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
